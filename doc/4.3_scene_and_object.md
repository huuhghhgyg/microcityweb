[< 4.2 Operation System](4.2_operation_system.md) | [Table of Contents](readme.md) | [4.4 Discrete Event Simulation >](4.4_discrete_event_simulation.md)

# 4.3 Scene and Object
The scene library is designed to control the scene canvas and the objects within it.

## Scene
This part of the functions include setting up the scene, adding lookup objects, and coordinate transformation tools.

<a id='scene.setenv'> scene.setenv (opttab) </a>

Set scene according to options in the opttab. No return. The list of options:
- clear: Clear all objects in the scene if set it to true. Default is false. This can be used in the middle of a script, because the scene will be automatically cleaned up when the script starts running.
- camtype: Set the camera to perspective ("persp") or orthographic ("ortho") projection. Default is "persp".
- grid: Set up a reference grid on the xz plane ("plane") or the surface of the unit sphere ("sphere"). Default is "none".
- bgcolor: Set background color. A color string such as "black" or "#000000" can be used. Default is "white".
- rotspeed: The speed of rotation for mouse dragging. Default is 1.
- transpeed: The speed of translation for mouse dragging. Default is 1.
- near: Camera frustum near plane. Default is 2.
- far: Camera frustum far plane. Default is 3000.

Here is a sample code to set the camera projection and background color:
```
scene.setenv({camtype='ortho', bgcolor='black'})
```

<a id='scene.addobj'> scene.addobj (type [, opttab]) </a>

Add an object to the scene with specific type and options. Return the object. The type includes: 
- "points": Discrete points in 3D. Use these options: vertices, selectable, color, opacity, hcolor, size.
- "polyline": A 3D polyline. Use these options: vertices, selectable, color, opacity, hcolor, size.
- "polygon": A 2D polygon in xy plane and extruded in z(size) direction. Use these options: vertices, selectable, color, opacity, hcolor, size.
- "mesh": A mesh. Use these options: vertices, selectable, color, opacity, hcolor.
- "box":  A box with six faces. Use these options: width, height, length, selectable, color, opacity, hcolor.
- "sphere": A sphere. Use these options: radius, segments, selectable, color, opacity, hcolor.
- "label": A text label that always faces towards the camera. Use these options: text, font, selectable, color, opacity, hcolor, size.
- "light": A directional light which always points to (0, 0, 0). Use the opacity option.
- ".json": A Threejs JSON file. Use these options: selectable, hcolor.
- ".gltf": A GLTF file. Use these options: selectable, hcolor.
- ".glb": A GLB file. Use these options: selectable, hcolor.
- ".geojson": A GeoJSON file. Use these options: selectable, color, opacity, hcolor.

- vertices: A array in which each three numbers represent a 3D point (x, y, z). For a mesh, every three points compose a triangle. The normal is follow the **right-hand** rule.
- width: 
- height
- length
- size
- radius
- segments
- selectable
- color
- hcolor
- opacity
- name
- text
- font


添加对象, 种类有'points', 'polyline', 'polygon', 'box', 'sphere', 'mesh', '*.json', '*.gltf', '*.glb', 'label', 'light'，可选参数表： {width, height, length, radius, segments, selectable, color, opacity, size, hcolor, name, text, font, vertices}。

<a id='scene.getobj'> scene.getobj (name) </a>

'camera'摄像机 'seleted'选择

<a id='scene.tovector'> scene.tovector (radius, phi, theta) </a>

球坐标转换为向量x, y, z

<a id='scene.topolar'> scene.topolar (x, y, z) </a>

向量转换为球坐标radius, phi, theta

<a id='scene.render'> scene.render () </a>


## Object
This part of functions control the objects in the scene. Note that a call obj:func(args) is syntactic sugar for scene.func(obj, args).

<a id='obj:getpos()'> obj:getpos () </a>

obj:getpos() 得到对象的位置x, y, z。

<a id='obj:setpos()'> obj:setpos (x, y, z) </a>

obj:setpos(x, y, z) 设置对象的位置。

<a id='obj:getrot'> obj:getrot () </a>

obj:getrot() 得到对象的旋转x, y, z。

<a id='obj:setrot'> obj:setrot (x, y, z) </a>

obj:setrot(x, y, z) 设置对象的旋转。

<a id='obj:getscale'> obj:getscale () </a>

obj:getscale() 得到对象的缩放x, y, z。

<a id='obj:setscale'> obj:setscale (x, y, z) </a>

obj:setscale(x, y, z) 设置对象的缩放。

<a id='obj:getchildren'> obj:getchildren () </a>

obj:getchildren() 得到子对象表。

<a id='obj:setchildren'> obj:setchildren (childtab) </a>

obj:setchildren(childtab) 设置子对象表。

<a id='obj:getparent'> obj:getparent () </a>

obj:getparent() 得到父对象。

<a id='obj:setparent'> obj:setparent (parent) </a>

obj:setparent(objparent) 设置父对象。

<a id='obj:getmat'> obj:getmat (argtab) </a>

<a id='obj:setmat'> obj:setmat (argtab) </a>

obj:setmat(argtab) 设置对象材质，可选参数表：{type, map, color, opacity}

<a id='obj:getvertices'> obj:getvertices () </a>

<a id='obj:setvertices'> obj:setvertices () </a>

<a id='obj:getdata'> obj:getdata () </a>

<a id='obj:setdata'> obj:setdata () </a>

<a id='obj:tojson'> obj:tojson () </a>

<a id='obj:delete'> obj:delete () </a>

[< 4.2 Operation System](4.2_operation_system.md) | [Table of Contents](readme.md) | [4.4 Discrete Event Simulation >](4.4_discrete_event_simulation.md)